{"version":3,"file":"embla-carousel-autoplay.cjs.js","sources":["../src/components/Options.ts","../src/components/Autoplay.ts"],"sourcesContent":["import { CreateOptionsType } from 'embla-carousel/components/Options'\n\nexport type OptionsType = CreateOptionsType<{\n  delay: number\n  jump: boolean\n  playOnInit: boolean\n  stopOnFocusIn: boolean\n  stopOnInteraction: boolean\n  stopOnMouseEnter: boolean\n  stopOnLastSnap: boolean\n  rootNode: ((emblaRoot: HTMLElement) => HTMLElement | null) | null\n}>\n\nexport const defaultOptions: OptionsType = {\n  active: true,\n  breakpoints: {},\n  delay: 4000,\n  jump: false,\n  playOnInit: true,\n  stopOnFocusIn: true,\n  stopOnInteraction: true,\n  stopOnMouseEnter: false,\n  stopOnLastSnap: false,\n  rootNode: null\n}\n","import { OptionsType, defaultOptions } from './Options'\nimport { CreatePluginType } from 'embla-carousel/components/Plugins'\nimport { OptionsHandlerType } from 'embla-carousel/components/OptionsHandler'\nimport { EmblaCarouselType } from 'embla-carousel'\n\ndeclare module 'embla-carousel/components/Plugins' {\n  interface EmblaPluginsType {\n    autoplay?: AutoplayType\n  }\n}\n\ndeclare module 'embla-carousel/components/EventHandler' {\n  interface EmblaEventListType {\n    autoplayPlay: 'autoplay:play'\n    autoplayStop: 'autoplay:stop'\n  }\n}\n\nexport type AutoplayType = CreatePluginType<\n  {\n    play: (jump?: boolean) => void\n    stop: () => void\n    reset: () => void\n    isPlaying: () => boolean\n  },\n  OptionsType\n>\n\nexport type AutoplayOptionsType = AutoplayType['options']\n\nfunction Autoplay(userOptions: AutoplayOptionsType = {}): AutoplayType {\n  let options: OptionsType\n  let emblaApi: EmblaCarouselType\n  let destroyed: boolean\n  let playing = false\n  let wasPlaying = false\n  let jump = false\n  let animationFrame = 0\n  let timer = 0\n\n  function init(\n    emblaApiInstance: EmblaCarouselType,\n    optionsHandler: OptionsHandlerType\n  ): void {\n    emblaApi = emblaApiInstance\n    if (emblaApi.scrollSnapList().length <= 1) return\n\n    const { mergeOptions, optionsAtMedia } = optionsHandler\n    const optionsBase = mergeOptions(defaultOptions, Autoplay.globalOptions)\n    const allOptions = mergeOptions(optionsBase, userOptions)\n    options = optionsAtMedia(allOptions)\n\n    jump = options.jump\n    destroyed = false\n\n    const { eventStore, ownerDocument } = emblaApi.internalEngine()\n    const emblaRoot = emblaApi.rootNode()\n    const root = (options.rootNode && options.rootNode(emblaRoot)) || emblaRoot\n\n    emblaApi.on('pointerDown', clearTimer)\n    if (!options.stopOnInteraction) emblaApi.on('pointerUp', startTimer)\n\n    if (options.stopOnMouseEnter) {\n      eventStore.add(root, 'mouseenter', clearTimer)\n\n      if (!options.stopOnInteraction) {\n        eventStore.add(root, 'mouseleave', startTimer)\n      }\n    }\n\n    if (options.stopOnFocusIn) {\n      eventStore.add(root, 'focusin', clearTimer)\n\n      if (!options.stopOnInteraction) {\n        eventStore.add(root, 'focusout', startTimer)\n      }\n    }\n\n    eventStore.add(ownerDocument, 'visibilitychange', () => {\n      if (ownerDocument.visibilityState === 'hidden') {\n        wasPlaying = playing\n        return clearTimer()\n      }\n\n      if (wasPlaying) startTimer()\n    })\n\n    if (options.playOnInit) {\n      emblaApi.on('init', startTimer).on('reInit', startTimer)\n    }\n  }\n\n  function destroy(): void {\n    destroyed = true\n    playing = false\n    emblaApi.off('init', startTimer).off('reInit', startTimer)\n    emblaApi.off('pointerDown', clearTimer)\n    if (!options.stopOnInteraction) emblaApi.off('pointerUp', startTimer)\n    clearTimer()\n    cancelAnimationFrame(animationFrame)\n    animationFrame = 0\n  }\n\n  function startTimer(): void {\n    if (destroyed) return\n    if (!playing) emblaApi.emit('autoplay:play')\n    const { ownerWindow } = emblaApi.internalEngine()\n    ownerWindow.clearInterval(timer)\n    timer = ownerWindow.setInterval(next, options.delay)\n    playing = true\n  }\n\n  function clearTimer(): void {\n    if (destroyed) return\n    if (playing) emblaApi.emit('autoplay:stop')\n    const { ownerWindow } = emblaApi.internalEngine()\n    ownerWindow.clearInterval(timer)\n    timer = 0\n    playing = false\n  }\n\n  function play(jumpOverride?: boolean): void {\n    if (typeof jumpOverride !== 'undefined') jump = jumpOverride\n    startTimer()\n  }\n\n  function stop(): void {\n    if (playing) clearTimer()\n  }\n\n  function reset(): void {\n    if (playing) play()\n  }\n\n  function isPlaying(): boolean {\n    return playing\n  }\n\n  function next(): void {\n    animationFrame = requestAnimationFrame(() => {\n      const { index } = emblaApi.internalEngine()\n      const nextIndex = index.clone().add(1).get()\n      const lastIndex = emblaApi.scrollSnapList().length - 1\n      const kill = options.stopOnLastSnap && nextIndex === lastIndex\n\n      if (kill) clearTimer()\n\n      if (emblaApi.canScrollNext()) {\n        emblaApi.scrollNext(jump)\n      } else {\n        emblaApi.scrollTo(0, jump)\n      }\n    })\n  }\n\n  const self: AutoplayType = {\n    name: 'autoplay',\n    options: userOptions,\n    init,\n    destroy,\n    play,\n    stop,\n    reset,\n    isPlaying\n  }\n  return self\n}\n\nAutoplay.globalOptions = <AutoplayOptionsType | undefined>undefined\n\nexport default Autoplay\n"],"names":["defaultOptions","active","breakpoints","delay","jump","playOnInit","stopOnFocusIn","stopOnInteraction","stopOnMouseEnter","stopOnLastSnap","rootNode","Autoplay","userOptions","options","emblaApi","destroyed","playing","wasPlaying","animationFrame","timer","init","emblaApiInstance","optionsHandler","scrollSnapList","length","mergeOptions","optionsAtMedia","optionsBase","globalOptions","allOptions","eventStore","ownerDocument","internalEngine","emblaRoot","root","on","clearTimer","startTimer","add","visibilityState","destroy","off","cancelAnimationFrame","emit","ownerWindow","clearInterval","setInterval","next","play","jumpOverride","stop","reset","isPlaying","requestAnimationFrame","index","nextIndex","clone","get","lastIndex","kill","canScrollNext","scrollNext","scrollTo","self","name","undefined"],"mappings":"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"}